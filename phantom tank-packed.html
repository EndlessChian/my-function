<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>PHANTOM TANK@EndlessChian</title><meta name="viewport"content="width=device-width, initial-scale=1"/><style>*{box-sizing:border-box;overflow:hidden}html,body{font-family:consolas;background:linear-gradient(to right,#9796f0,#fbc7d4);overflow:visible}#b{font-style:normal;color:#333;position:relative;display:block;padding:5%;justify-items:center;cursor:auto;width:100%;height:max-content}canvas{display:none}#ip{box-sizing:border-box;width:100%;height:max-content;border:#fbc7d4 solid;padding:1rem;justify-items:center;cursor:context-menu;box-shadow:rgba(100,100,100,0.2)3px 2px 1px 0px;border-radius:10px;position:relative;display:flex}#ip:focus{box-shadow:rgba(100,100,100,0.2)4px 3px 2px 1px;transition:0.3s linear}#title{min-height:2rem}input{box-sizing:border-box;margin:5%1%;display:inline-grid;width:69%}.ip{width:50%}textarea{text-align:center;color:hotpink;font-size:larger;font-family:'Gill Sans','Gill Sans MT',Calibri,'Trebuchet MS',sans-serif;border-radius:5px;width:5rem;min-height:max-content;font-style:italic;height:2rem;padding:5px;justify-items:center;display:inline-grid;resize:horizontal;margin:1%4%;border:#bbb 1px;box-shadow:inset#ccc 1px 1px 2px,#aaa 1px 1px 2px;outline:none;border:#555 1px solid}textarea:focus{box-shadow:inset#dea -1px -1px 1px 1px}textarea.error{border-color:rgb(247,107,107);transition:0.1s linear}#content{min-height:5rem}.a>span{color:#444;font-size:larger;font-weight:bolder;font-family:'Courier New',Courier,monospace;cursor:pointer;padding:10px 20px;margin:10px 4%;width:24%;place-content:center;display:inline-flex;border:solid#333 1px;border-radius:10px 10px 0 0;border-bottom:none;transition:0.1s linear}.a>span:hover{transform:scale(1.135);transition:0.3s linear;text-decoration:underline;text-decoration-color:black;text-decoration-style:double}.a>span.active{text-decoration-style:solid}.a>span:nth-child(1):hover{color:rgb(247,80,51)}.a>span:nth-child(2):hover{color:rgb(90,231,170)}.a>span:nth-child(3):hover{color:rgb(155,81,240)}.a>span.on{text-decoration:line-through;text-decoration-color:white;text-decoration-style:solid}.a>span.on:hover{text-decoration-color:white;text-decoration-style:dashed}div.a:after{height:max-content;content:'';border:solid#333 3px;border-bottom:#333;padding:10px;display:grid;border-radius:5px;overflow:hidden;margin:-10px 7px}span.ip>img{transform:scale(92%);transform-origin:left top;display:grid;border-radius:2%;min-height:16rem;margin:0 4%;background-size:cover;cursor:zoom-in}#o{display:inline-flex;width:100%;border:#dea 5px double;border-radius:10px;margin:2rem 0}#o>img{min-width:50%;max-width:90%;min-height:3rem;border:pink 2px solid;margin:2rem 1rem;border-radius:5px;transform-origin:center;position:relative;display:inline-block;box-shadow:#444 3px 4px 2px;transition:0.1s linear}#o>img:hover{border-color:greenyellow;border-radius:5px;box-shadow:#333 5px 6px 3px}#o>span:first-child{width:10%;min-height:3rem;border-right:#444 1px solid;background-color:#ddd;margin:0;opacity:0.6;display:grid;transition:0.1s linear}#o>span:first-child:hover{opacity:0.9}#o>span>span{width:100%;height:100%;margin:0;place-self:center;align-content:center;text-align:center;border-bottom:#444 1px solid}#o>span>span:hover{opacity:1;font-size:larger;transition:0.1s linear}span.ma{display:none;width:100px;height:100px;position:fixed;font-size:10px;transform-origin:top left;background-color:aliceblue;background-repeat:no-repeat;border:rgb(248,160,213)1px solid;border-radius:50%;transform:scale(1.5);text-align:center;place-content:flex-end;padding:15px 0;z-index:10}img{z-index:3}</style></head><body><div id="b"><div id="ip"><span id="i0"class="ip"><form id="f0"enctype="multipart/form-data"class="r g b"><textarea id="b0"placeholder="background0"onchange="script:cc(this)">0</textarea><input type="file"title="i0"onchange="scripts:lo(this)"><div class="a"><span class="on"onclick="script:this.classList.toggle('on');l0.classList.toggle('r');gr(f0)">RED</span><span class="on"onclick="script:this.classList.toggle('on');l0.classList.toggle('g');gr(f0)">GREEN</span><span class="on"onclick="script:this.classList.toggle('on');l0.classList.toggle('b');gr(f0)">BLUE</span></div></form><canvas></canvas><img src alt onclick="scripts:if(f0.files.length)save_image(i0, f0.files[0].name);"><span class="ma"></span></span><span id="i1"class="ip"><form id="f1"enctype="multipart/form-data"class="r g b"><textarea id="b1"placeholder="background1"onchange="script:cc(this)">255</textarea><input type="file"title="i1"onchange="scripts:lo(this)"><div class="a"><span class="on"onclick="script:this.classList.toggle('on');l1.classList.toggle('r');gr(f1)">RED</span><span class="on"onclick="script:this.classList.toggle('on');l1.classList.toggle('g');gr(f1)">GREEN</span><span class="on"onclick="script:this.classList.toggle('on');l1.classList.toggle('b');gr(f1)">BLUE</span></div></form><canvas></canvas><img src alt onclick="scripts:if(f1.files.length)save_image(i1, f1.files[0].name)"><span class="ma"></span></span></div><span id="o"><span><span onclick="script:tc();">create</span><span id="cv"onclick="script:this.classList.toggle('re');cr()">0</span></span><canvas></canvas><img src alt value="save"onclick="scripts:if(f0.files.length&&f1.files.length)save_image(o, f0.files[0].name.slice(-20)+'-'+l0.className.replaceAll(' ','_')+'+'+f1.files[0].name.slice(-20)+'-'+l1.className.replaceAll(' ','_')+'.png')"><span class="ma"></span></span></div></body><script defer>let f0=document.querySelector('#f0>input'),f1=document.querySelector('#f1>input'),i0=document.querySelector('#i0>img'),i1=document.querySelector('#i1>img'),o=document.querySelector('#o>img'),l0=document.querySelector('#f0'),l1=document.querySelector('#f1'),c0=document.querySelector('#b0'),c1=document.querySelector('#b1'),cv=document.querySelector('#cv');const lo=p=>{if(p.files.length){var file=p.files[0];if(file.type.search('image/')==0){var f=new FileReader();var g=new Image();f.onload=function(e){if(f.readyState==2){var i=document.querySelector('#'+p.title+'>img');i.src=g.src=e.target.result;g.onload=function(){var scale=document.querySelector('#'+p.title+'>form>div.a').offsetWidth/g.naturalWidth;i.width=scale*g.width;var x=document.querySelector('#'+p.title+'>canvas');x.height=g.height;x.width=g.width;x.getContext('2d').drawImage(g,0,0)}}};f.readAsDataURL(file)}}};const gr=p=>{if(!p.files.length)return;if((p.title=='i0'&&(!i0.height||!i0.width))||((p.title=='i1'&&(!i1.height||!i1.width))))return console.log('Error image'+p.title.at(-1)+' size.');var x=document.querySelector('#i'+p.title.at(-1)+'>canvas'),d=x.getContext('2d').getImageData(0,0,x.width,x.height).data,id=new ImageData(x.width,x.height);var a=id.data,l=(p.title=='i0')?l0.classList:l1.classList;a.fill(255);if(l.length==0)return console.log('Error image'+p.title.at(-1)+' color.');var li=new Uint8Array(l.length);l.forEach((c,i)=>{if(c=='r')li[i]=0;else if(c=='g')li[i]=1;else if(c=='b')li[i]=2});for(var i=0,j=d.length,k=0,u=li.length;i<j;i++,k=0){li.forEach(c=>k+=d[i+c]);a[i++]=a[i++]=a[i++]=parseInt(k/u)}var ix=document.createElement('canvas');ix.width=x.width;ix.height=x.height;ix.getContext('2d').putImageData(id,0,0);if(p.title=='i0')i0.src=ix.toDataURL('image/png');else i1.src=ix.toDataURL('image/png');delete ix};function pt(bk,i0,i1,b0,b1){var a0=new Int16Array(i0),a1=new Int16Array(i1),w=a1.map((n,i)=>n-a0.at(i)),ci,ca;ci=ca=w[0];w.forEach(n=>{if(n>ca)ca=n;else if(n<ci)ci=n});var di=a0[0]*b1-a1[0]*b0;for(var i=0,j=a0.length,k;i<j;i++){k=a0[i]*b1-a1[i]*b0;if(k<di)di=k}var q=b1-b0,k=q/(ca-ci),e1=k*(di+b0*ci)/-q,e2=k*(di+b1*ci)/-q;for(var i=0,j=a0.length,a,b;i<j;i++){a0[i]=a=Math.round(a0[i]*k+e1);a1[i]=b=Math.round(a1[i]*k+e2);w[i]=q-(b-a)}k=255/q;w.forEach((n,i)=>{q=Math.round(k*n);if(q>255)q=255;else if(q<0)q=0;bk[i*4+3]=q});w.forEach((n,i)=>{if(n==0)q=255;else{q=Math.round((a0[i]*b1-a1[i]*b0)/n);if(q>255)q=255;else if(q<0)q=0}bk[i*=4]=bk[++i]=bk[++i]=q})}function pi(g,w,b,w1,c){var h=g.length/w,h1=b.length/w1,p=[parseInt(w1/2-w/2),parseInt(h1/2-h/2)];for(var i=0,j,x,y;i<h;i++){y=i+p[1];if(0<=y&&y<h1)for(j=0;j<w;j++){x=j+p[0];if(0<=x&&x<w1)b[y*w1+x]=g[i*w+j]}}}function tc(){if(!f0.files.length||!f1.files.length||!i0.naturalWidth||!i1.naturalWidth||!i0.naturalHeight||!i1.naturalHeight)return console.log('onclick: wrroy Image type.');var a=parseInt(c0.value),b=parseInt(c1.value);if(isNaN(a)||isNaN(b)||a<0||a>=b||b>255)return console.log('Color unexcepted.',a,b);var w0=i0.naturalWidth,h0=i0.naturalHeight,w1=i1.naturalWidth,h1=i1.naturalHeight,s0=w0*h0,s1=w1*h1,g=(s0>s1),r=Math.sqrt(g?s1/s0:s0/s1);s0=[g?parseInt(w0*r):w0,g?parseInt(h0*r):h0];s1=[g?w1:parseInt(w1*r),g?h1:parseInt(h1*r)];var ss=[Math.max(s0[0],s1[0]),Math.max(s0[1],s1[1])],a0=new Uint8Array(ss[0]*ss[1]).fill((a+b)/2),a1=new Uint8Array(ss[0]*ss[1]).fill((a+b)/2),x=document.querySelector("#o>canvas");x.width=g?s0[0]:s1[0];x.height=g?s0[1]:s1[1];var c=x.getContext('2d');c.drawImage(g?i0:i1,0,0,x.width,x.height);var d=c.getImageData(0,0,x.width,x.height),t=new Uint8Array(x.width*x.height);for(var i=0,j=t.length;i<j;i++)t[i]=d.data[i*4];pi(t,x.width,g?a0:a1,ss[0],[0,0]);c.clearRect(0,0,x.width,x.height);x.width=g?s1[0]:s0[0];x.height=g?s1[1]:s0[1];c.drawImage(g?i1:i0,0,0);d=c.getImageData(0,0,x.width,x.height);t=new Uint8Array(s0[0]*s0[1]);for(var i=0,j=t.length;i<j;i++)t[i]=d.data[i*4];pi(t,x.width,g?a1:a0,ss[0],[0,0]);c.clearRect(0,0,x.width,x.height);x.width=ss[0];x.height=ss[1];d=c.getImageData(0,0,x.width,x.height);pt(d.data,a0,a1,a,b);c.putImageData(d,0,0);o.src=x.toDataURL('image/png')}function save_image(i,m){if(!i.src||!i.naturalWidth||!i.naturalHeight)return;var a=document.createElement('a');a.download=m?m:(Math.random()+'.png').slice(2);a.href=i.src;a.click();delete a}function cc(m){var c=parseInt(m.value);if(isNaN(c)||c<0||c>255){m.classList.add('error');return}var a=parseInt(c0.value),b=parseInt(c1.value);if(a>=b){c0.classList.add('error');c1.classList.add('error');return}c0.classList.remove('error');c1.classList.remove('error');o.style.backgroundColor=cv.innerText=(cv.classList.length)?b:a}function cr(){var a=parseInt(c0.value),b=parseInt(c1.value);cv.innerText=(cv.classList.length)?b:a;if(isNaN(a)||isNaN(b)||a<0||a>=b||b>255){cv.style.backgroundColor=`#444`;cv.style.color=`#000`;return console.log('Color unexcepted.',a,b)}var c=(cv.classList.length)?b:a;o.style.backgroundColor=cv.style.backgroundColor=`rgb(${c},${c},${c})`;cv.style.color=`rgb(${255-c},${255-c},${255-c})`}function mm(c,i,k,e){var x=e.offsetX,y=e.offsetY;k.style.left=e.clientX+'px';k.style.top=e.clientY+'px';if(!i.naturalHeight||!i.naturalWidth)return;var s=i.width/i.naturalWidth;k.style.backgroundPositionX=`-${Math.round((x-75)/s)}px`;k.style.backgroundPositionY=`-${Math.round((y-75)/s)}px`;var p=c.getContext('2d').getImageData(Math.round(x/s),Math.round(y/s),1,1).data;k.innerText=`(${p[0]} ${p[1]} ${p[2]})`}window.onload=()=>{var m0=document.querySelector('#i0>span.ma'),m1=document.querySelector('#i1>span.ma'),m2=document.querySelector('#o>span.ma'),x0=document.querySelector('#i0>canvas'),x1=document.querySelector('#i1>canvas'),x2=document.querySelector('#o>canvas');ml=(x,i,k,e)=>{k.style.display='none'};me=(x,i,k,e)=>{k.style.display='block';k.style.backgroundImage=`url(${i.src})`;var s=i.naturalWidth?i.width/i.naturalWidth:1;k.style.fontSize=`${10/s}px`;k.style.padding=`0 0 ${15/s}px 0`;k.style.transform=`scale(${1.5*s})`;k.style.width=`${Math.round(100/s*1.5)}px`;k.style.height=`${Math.round(100/s*1.5)}px`;mm(x,i,k,e)};i0.addEventListener("mousemove",e=>mm(x0,i0,m0,e));i1.addEventListener("mousemove",e=>mm(x1,i1,m1,e));o.addEventListener("mousemove",e=>mm(x2,o,m2,e));i0.addEventListener("mouseleave",e=>ml(x0,i0,m0,e));i1.addEventListener("mouseleave",e=>ml(x1,i1,m1,e));o.addEventListener("mouseleave",e=>ml(x2,o,m2,e));i0.addEventListener("mouseenter",e=>me(x0,i0,m0,e));i1.addEventListener("mouseenter",e=>me(x1,i1,m1,e));o.addEventListener("mouseenter",e=>me(x2,o,m2,e))}</script></html>